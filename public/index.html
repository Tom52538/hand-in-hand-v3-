<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link
    rel="icon"
    type="image/png"
    sizes="192x192"
    href="/icons/Hand-in-Hand-Logo-192x192.png"
  />
  <link
    rel="apple-touch-icon"
    sizes="192x192"
    href="/icons/Hand-in-Hand-Logo-192x192.png"
  />
  <link rel="shortcut icon" href="/icons/Hand-in-Hand-Logo-192x192.png" />
  <link rel="manifest" href="/icons/manifest.json" />
  <title>Arbeitszeiterfassung</title>
  <link rel="stylesheet" href="style.css" />
  <meta name="theme-color" content="#ffffff" />
  <link
    rel="apple-touch-icon"
    sizes="180x180"
    href="/icons/Hand-in-Hand-Logo-192x192.png"
  />
  <style>
    .hidden {
      display: none;
    }
    form > div {
      margin-bottom: 1rem;
    }
    label {
      display: block;
      margin-bottom: 0.3rem;
    }
    /* Tabellen-Layout für Admin-Bereich */
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th,
    td {
      border: 1px solid #ccc;
      padding: 8px;
      vertical-align: middle;
      text-align: left;
    }
    td button {
      margin-right: 5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Arbeitszeiterfassung</h1>

    <form id="workHoursForm">
      <!-- Buttons in gewünschter Reihenfolge -->
      <div>
        <button type="button" id="workEndBtn">Arbeitsende buchen</button>
      </div>
      <div>
        <button type="button" id="pauseBtn">Pausen buchen</button>
      </div>

      <!-- Felder in gewünschter Reihenfolge -->
      <div>
        <label for="date">Datum:</label>
        <input type="date" id="date" name="date" required readonly />
      </div>
      <div>
        <label for="startTime">Arbeitsbeginn:</label>
        <input type="time" id="startTime" name="startTime" required readonly />
      </div>
      <div>
        <label for="endTime">Arbeitsende:</label>
        <input type="time" id="endTime" name="endTime" required readonly />
      </div>
      <div>
        <label for="breakTime">Pause (Minuten):</label>
        <input
          type="number"
          id="breakTime"
          name="breakTime"
          min="0"
          step="1"
          value="0"
          required
          readonly
        />
      </div>
      <div>
        <label for="comment">Bemerkungen:</label>
        <input type="text" id="comment" name="comment" />
      </div>
      <button type="submit">Eintragen</button>
    </form>

    <h2>Gebuchte Arbeitszeiten</h2>
    <ul id="workHoursList"></ul>

    <h2>Gesamtarbeitszeit</h2>
    <p id="totalHours"></p>

    <h2>Admin Login</h2>
    <form id="adminLoginForm">
      <label for="adminPassword">Passwort:</label>
      <input type="password" id="adminPassword" name="adminPassword" required />
      <button type="submit">Anmelden</button>
    </form>

    <!-- Admin-Funktionen -->
    <div id="adminPanel" class="hidden">
      <h2>Datensatz bearbeiten</h2>
      <form id="editForm">
        <input type="hidden" id="editId" name="id" />
        <div>
          <label for="editName">Name:</label>
          <input type="text" id="editName" name="name" />
        </div>
        <div>
          <label for="editDate">Datum:</label>
          <input type="date" id="editDate" name="date" />
        </div>
        <div>
          <label for="editStartTime">Arbeitsbeginn:</label>
          <input type="time" id="editStartTime" name="startTime" required />
        </div>
        <div>
          <label for="editEndTime">Arbeitsende:</label>
          <input type="time" id="editEndTime" name="endTime" required />
        </div>
        <div>
          <label for="editBreakTime">Pause (Minuten):</label>
          <input
            type="number"
            id="editBreakTime"
            name="breakTime"
            min="0"
            step="1"
            value="0"
          />
        </div>
        <div>
          <label for="editComment">Bemerkungen:</label>
          <input type="text" id="editComment" name="comment" />
        </div>
        <button type="button" onclick="saveChanges()">Speichern</button>
      </form>

      <h2>Admin Panel</h2>
      <div class="table-wrapper">
        <table id="workHoursTable">
          <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Datum</th>
              <th>Arbeitszeit</th>
              <th>Stunden</th>
              <th>Bemerkungen</th>
              <th>Aktionen</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <button id="adminDownloadCsv">
        Alle Arbeitszeiten als CSV herunterladen
      </button>
      <button id="adminDeleteData">Alle Arbeitszeiten löschen</button>
    </div>

    <!-- Mitarbeiterverwaltung (Admin) -->
    <div id="employeePanel" class="hidden">
      <h2>Mitarbeiterverwaltung</h2>
      <form id="addEmployeeForm">
        <div>
          <label for="employeeName">Name:</label>
          <input type="text" id="employeeName" name="employeeName" required />
        </div>
        <div>
          <label for="mo_hours">Montag (Stunden):</label>
          <input
            type="number"
            id="mo_hours"
            name="mo_hours"
            step="0.1"
            value="0"
          />
        </div>
        <div>
          <label for="di_hours">Dienstag (Stunden):</label>
          <input
            type="number"
            id="di_hours"
            name="di_hours"
            step="0.1"
            value="0"
          />
        </div>
        <div>
          <label for="mi_hours">Mittwoch (Stunden):</label>
          <input
            type="number"
            id="mi_hours"
            name="mi_hours"
            step="0.1"
            value="0"
          />
        </div>
        <div>
          <label for="do_hours">Donnerstag (Stunden):</label>
          <input
            type="number"
            id="do_hours"
            name="do_hours"
            step="0.1"
            value="0"
          />
        </div>
        <div>
          <label for="fr_hours">Freitag (Stunden):</label>
          <input
            type="number"
            id="fr_hours"
            name="fr_hours"
            step="0.1"
            value="0"
          />
        </div>
        <button type="submit">Mitarbeiter hinzufügen</button>
      </form>

      <h3>Aktuelle Mitarbeiter</h3>
      <ul id="employeeList"></ul>

      <h3>Mitarbeiter bearbeiten</h3>
      <form id="editEmployeeForm" class="hidden">
        <input type="hidden" id="editEmployeeId" name="id" />
        <div>
          <label for="editEmployeeName">Name:</label>
          <input type="text" id="editEmployeeName" name="name" required />
        </div>
        <div>
          <label for="editMoHours">Montag (Stunden):</label>
          <input
            type="number"
            id="editMoHours"
            name="mo_hours"
            step="0.1"
            value="0"
          />
        </div>
        <div>
          <label for="editDiHours">Dienstag (Stunden):</label>
          <input
            type="number"
            id="editDiHours"
            name="di_hours"
            step="0.1"
            value="0"
          />
        </div>
        <div>
          <label for="editMiHours">Mittwoch (Stunden):</label>
          <input
            type="number"
            id="editMiHours"
            name="mi_hours"
            step="0.1"
            value="0"
          />
        </div>
        <div>
          <label for="editDoHours">Donnerstag (Stunden):</label>
          <input
            type="number"
            id="editDoHours"
            name="do_hours"
            step="0.1"
            value="0"
          />
        </div>
        <div>
          <label for="editFrHours">Freitag (Stunden):</label>
          <input
            type="number"
            id="editFrHours"
            name="fr_hours"
            step="0.1"
            value="0"
          />
        </div>
        <button type="button" onclick="saveEmployeeChanges()">Speichern</button>
        <button type="button" onclick="cancelEdit()">Abbrechen</button>
      </form>
    </div>
  </div>

  <script>
    // Hier kommt dein bestehender JavaScript-Code rein (z. B. fetch-Requests usw.)
    // Du musst nur anpassen, wie die Buttons "Arbeitsende buchen" (id="workEndBtn")
    // und "Pausen buchen" (id="pauseBtn") reagieren sollen.

    // Bsp.:
    let pauseState = 0;
    let pauseStartTime = null;

    document.getElementById('pauseBtn').addEventListener('click', function() {
      // ...
    });

    // Ggfs. Logik für "Arbeitsende buchen" anstelle von "Arbeitsbeginn buchen" etc.
    // ...
  </script>
</body>
</html>
